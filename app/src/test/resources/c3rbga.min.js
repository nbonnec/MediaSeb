var gaProperty_bib = 'UA-50353823-5';
var gaProperty_c3rb = '';
var disableStr_bib = 'ga-disable-' + gaProperty_bib;
var consentCookie = getCookie('hasConsent');
if (!consentCookie) {
    var referrer_host = document.referrer.split('/')[2];
    if (referrer_host != document.location.hostname) {
        window[disableStr_bib] = true;
        document.addEventListener('DOMContentLoaded', function() {
            askConsent();
        });
    } else {
        document.cookie = 'hasConsent=true; ' + getCookieExpireDate() + ' ; path=/';
    }
}
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-50353823-5']);
_gaq.push(['_trackPageview']);
(function() {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();

function getCookieExpireDate() {
    var a = 342144e5,
        b = new Date;
    b.setTime(b.getTime() + a);
    var c = "; expires=" + b.toGMTString();
    return c
}

function askConsent() {
    var a = document.getElementsByTagName("body")[0],
        b = document.createElement("div");
    b.setAttribute("id", "cookie-banner"), b.innerHTML = '<div id="alertga" class="alertga">Ce site utilise Google Analytics.    En continuant à naviguer ou en cliquant sur le bouton "Autoriser", vous nous autorisez à déposer des cookies à des fins de     mesure d\'audience.<br>Pour s\'opposer à ce dépôt vous pouvez cliquer sur le bouton "Refuser".     <div class="clearfix"></div><button type="button" class="btn btn-success flr" onclick="gaAutorise();">Autoriser</button><button type="button" class="btn btn-danger flr margeright" onclick="gaOptout();">Refuser</button><div class="clearfix"></div></div>', a.insertBefore(b, a.firstChild), document.getElementsByTagName("body")[0].className += " cookiebanner"
}

function getCookie(a) {
    return document.cookie.length > 0 && (begin = document.cookie.indexOf(a + "="), -1 !== begin) ? (begin += a.length + 1, end = document.cookie.indexOf(";", begin), -1 === end && (end = document.cookie.length), unescape(document.cookie.substring(begin, end))) : null
}

function delCookie(a) {
    path = ";path=/", domain = ";domain=." + document.location.hostname;
    var b = "Thu, 01-Jan-1970 00:00:01 GMT";
    document.cookie = a + "=" + path + domain + ";expires=" + b
}

function deleteAnalyticsCookies() {
    for (var a = ["__utma", "__utmb", "__utmc", "__utmz", "_ga"], b = 0; b < a.length; b++) delCookie(a[b])
}

function gaOptout() {
    document.cookie = disableStr_bib + "=true;" + getCookieExpireDate() + " ; path=/", "undefined" != typeof disableStr_c3rb && "" !== disableStr_c3rb && (document.cookie = disableStr_c3rb + "=true;" + getCookieExpireDate() + " ; path=/"), document.cookie = "hasConsent=false;" + getCookieExpireDate() + " ; path=/";
    var a = document.getElementById("cookie-banner");
    null !== a && (a.innerHTML = '<div class="alert alert-success nomarge margetop fade in"><button type="button" class="close" data-dismiss="alert">&times;</button>Vous vous êtes opposé         au dépôt de cookies de mesures d\'audience dans votre navigateur </div>'), window[disableStr_bib] = !0, "undefined" != typeof disableStr_c3rb && "" !== disableStr_c3rb && (window[disableStr_c3rb] = !0), deleteAnalyticsCookies()
}

function gaAutorise() {
    document.getElementById("alertga").style.display = "none", document.cookie = "hasConsent=true;" + getCookieExpireDate() + " ; path=/", window[disableStr_bib] = !1, "undefined" != typeof disableStr_c3rb && "" !== disableStr_c3rb && (window[disableStr_c3rb] = !1)
}
